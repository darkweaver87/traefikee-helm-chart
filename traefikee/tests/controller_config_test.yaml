suite: controller config test
templates:
  - controller/config.yaml
tests:
  - it: should provide default static config
    asserts:
      - isKind:
          of: ConfigMap
      - isAPIVersion:
          of: v1
      - equal:
          path: metadata.name
          value: default-static-config
  - it: should fail because of conflicting config
    set:
      controller:
        staticConfig:
          configMap:
            name: traefik-config
            key: "static.yml"
    asserts:
      - failedTemplate:
          errorMessage: "ERROR: Can not set both content and configMap on staticConfig"
